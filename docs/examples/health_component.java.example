import com.hypixel.hytale.codec.Codec;
import com.hypixel.hytale.codec.KeyedCodec;
import com.hypixel.hytale.codec.builder.BuilderCodec;
import com.hypixel.hytale.component.Component;
import com.hypixel.hytale.server.core.universe.world.storage.EntityStore;
import javax.annotation.Nullable;
public class HealthComponent implements Component<EntityStore> {
public static final BuilderCodec<HealthComponent> CODEC =
((BuilderCodec.Builder) BuilderCodec.builder(HealthComponent.class, HealthComponent::new)
.append(new KeyedCodec<>("MaxHealth", Codec.FLOAT),
(c, v) -> c.maxHealth = v, c -> c.maxHealth)
.add())
.append(new KeyedCodec<>("CurrentHealth", Codec.FLOAT),
(c, v) -> c.currentHealth = v, c -> c.currentHealth)
.add()
.append(new KeyedCodec<>("RegenRate", Codec.FLOAT),
(c, v) -> c.regenRate = v, c -> c.regenRate)
.add()
.build();
private float maxHealth = 100f;
private float currentHealth = 100f;
private float regenRate = 1f;
public HealthComponent() {}
public HealthComponent(float maxHealth, float regenRate) {
this.maxHealth = maxHealth;
this.currentHealth = maxHealth;
this.regenRate = regenRate;
}
public float getMaxHealth() { return maxHealth; }
public float getCurrentHealth() { return currentHealth; }
public float getRegenRate() { return regenRate; }
public void heal(float amount) {
currentHealth = Math.min(maxHealth, currentHealth + amount);
}
public void damage(float amount) {
currentHealth = Math.max(0, currentHealth - amount);
}
public boolean isDead() {
return currentHealth <= 0;
}
public float getHealthPercent() {
return currentHealth / maxHealth;
}
@Override
@Nullable
public Component<EntityStore> clone() {
HealthComponent copy = new HealthComponent();
copy.maxHealth = this.maxHealth;
copy.currentHealth = this.currentHealth;
copy.regenRate = this.regenRate;
return copy;
}
}